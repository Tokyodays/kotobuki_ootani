!function i(r,d,l){function u(t,e){if(!d[t]){if(!r[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(c)return c(t,!0);var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}var o=d[t]={exports:{}};r[t][0].call(o.exports,function(e){return u(r[t][1][e]||e)},o,o.exports,i,r,d,l)}return d[t].exports}for(var c="function"==typeof require&&require,e=0;e<l.length;e++)u(l[e]);return u}({1:[function(e,t,n){"use strict";n.parse=function(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var n={},a=t||{},o=e.split(p),i=a.decode||s,r=0;r<o.length;r++){var d=o[r],l=d.indexOf("=");if(!(l<0)){var u=d.substr(0,l).trim(),c=d.substr(++l,d.length).trim();'"'==c[0]&&(c=c.slice(1,-1)),null==n[u]&&(n[u]=m(c,i))}}return n},n.serialize=function(e,t,n){var a=n||{},o=a.encode||u;if("function"!=typeof o)throw new TypeError("option encode is invalid");if(!c.test(e))throw new TypeError("argument name is invalid");var i=o(t);if(i&&!c.test(i))throw new TypeError("argument val is invalid");var r=e+"="+i;if(null!=a.maxAge){var d=a.maxAge-0;if(isNaN(d))throw new Error("maxAge should be a Number");r+="; Max-Age="+Math.floor(d)}if(a.domain){if(!c.test(a.domain))throw new TypeError("option domain is invalid");r+="; Domain="+a.domain}if(a.path){if(!c.test(a.path))throw new TypeError("option path is invalid");r+="; Path="+a.path}if(a.expires){if("function"!=typeof a.expires.toUTCString)throw new TypeError("option expires is invalid");r+="; Expires="+a.expires.toUTCString()}a.httpOnly&&(r+="; HttpOnly");a.secure&&(r+="; Secure");if(a.sameSite){var l="string"==typeof a.sameSite?a.sameSite.toLowerCase():a.sameSite;switch(l){case!0:r+="; SameSite=Strict";break;case"lax":r+="; SameSite=Lax";break;case"strict":r+="; SameSite=Strict";break;default:throw new TypeError("option sameSite is invalid")}}return r};var s=decodeURIComponent,u=encodeURIComponent,p=/; */,c=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function m(t,e){try{return e(t)}catch(e){return t}}},{}],2:[function(e,t,n){for(var o=[],a=0;a<256;++a)o[a]=(a+256).toString(16).substr(1);t.exports=function(e,t){var n=t||0,a=o;return[a[e[n++]],a[e[n++]],a[e[n++]],a[e[n++]],"-",a[e[n++]],a[e[n++]],"-",a[e[n++]],a[e[n++]],"-",a[e[n++]],a[e[n++]],"-",a[e[n++]],a[e[n++]],a[e[n++]],a[e[n++]],a[e[n++]],a[e[n++]]].join("")}},{}],3:[function(e,t,n){var a="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(a){var o=new Uint8Array(16);t.exports=function(){return a(o),o}}else{var i=new Array(16);t.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},{}],4:[function(e,t,n){var r=e("./lib/rng"),d=e("./lib/bytesToUuid");t.exports=function(e,t,n){var a=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||r)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var i=0;i<16;++i)t[a+i]=o[i];return t||d(o)}},{"./lib/bytesToUuid":2,"./lib/rng":3}],5:[function(e,t,n){"use strict";var a,o=e("./index.js"),i=(a=o)&&a.__esModule?a:{default:a};window.atlasTracking=new i.default},{"./index.js":6}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a,o=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),i=e("./utils.js");var m=new((a=i)&&a.__esModule?a:{default:a}).default,v=new m.handler,f={},r={},g={},w={},h={},y={},d={},l={},u={},c={},_={unload:null,scroll:null,infinityScroll:null,read:null,click:null,viewability:{},media:{},form:{}},k=Date.now(),s=k,p=null;p="onbeforeunload"in window.parent?"beforeunload":"onpagehide"in window.parent?"pagehide":"unload";var b=function(){function a(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t=null;try{t=new CustomEvent("atlasVisibilityStatus")}catch(e){(t=window.parent.document.createEvent("CustomEvent")).initCustomEvent("atlasVisibilityStatus",!1,!1,{})}var e=window.parent.requestAnimationFrame||window.parent.mozRequestAnimationFrame||window.parent.webkitRequestAnimationFrame||window.parent.msRequestAnimationFrame;if(e)window.parent.requestAnimationFrame=e;else{var o=0;window.parent.requestAnimationFrame=function(e){var t=Date.now(),n=Math.max(0,16-(t-o)),a=window.parent.setTimeout(function(){e(t+n)},n);return o=t+n,a}}var n=null;!function e(){if(window.parent.requestAnimationFrame(e),n)return!1;n=setTimeout(function(){window.parent.dispatchEvent(t),n=null},250)}()}return o(a,[{key:"getQueryValue",value:function(e){return m.getQ(e)||""}},{key:"getCookieValue",value:function(e){return m.getC(e)||""}},{key:"getLocalStorageValue",value:function(e){return m.getLS(e)||""}},{key:"setDataSrc",value:function(e){d=JSON.parse(decodeURIComponent(e))}},{key:"getDataFromSrc",value:function(e){return d[e]||""}},{key:"getVisibility",value:function(e){return m.getV(e)||""}},{key:"config",value:function(e){l.url=void 0!==e.defaults.pageUrl?e.defaults.pageUrl:window.parent.document.location.href,l.referrer=void 0!==e.defaults.pageReferrer?e.defaults.pageReferrer:window.parent.document.referrer,l.page_title=void 0!==e.defaults.pageTitle?e.defaults.pageTitle:window.parent.document.title,l.product_family=void 0!==e.product.productFamily?e.product.productFamily:null,l.product=void 0!==e.product.productName?e.product.productName:null,r=void 0!==e.system?e.system:{},f=void 0!==e.debug?e.debug:{},g=void 0!==e.options?e.options:{},m.initSystem(r),("true"===m.getC("atlasOutputLog")||f&&f.outputLog)&&(f.outputLog=!0,console.log("ATJ configured"))}},{key:"setCustomVars",value:function(e,t){h[e]=t}},{key:"setCustomObject",value:function(e,t){h.custom_object[e]=t}},{key:"setCustomId",value:function(e,t){w.external_ids[e]=t}},{key:"delCustomVars",value:function(e){delete h[e]}},{key:"delCustomObject",value:function(e){delete h.custom_object[e]}},{key:"delCustomId",value:function(e){delete w.external_ids[e]}},{key:"optout",value:function(e){var t=m.getLS("atlasOptout");"enable"===e?m.setLS("atlasOptout",!0):"disable"===e?m.delLS("atlasOptout"):"true"===t?console.log("enabled"):console.log("disabled")}},{key:"initEventListeners",value:function(){f&&f.outputLog&&console.log("ATJ initialized EventListeners"),(g.exchangeAtlasId&&g.exchangeAtlasId.pass||g.trackClick&&g.trackClick.enable||g.trackLink&&g.trackLink.enable||g.trackDownload&&g.trackDownload.enable)&&this.delegateClickEvents({passAtlasId:g.exchangeAtlasId,trackClick:g.trackClick,trackLink:g.trackLink,trackDownload:g.trackDownload}),g.trackUnload&&g.trackUnload.enable&&this.setEventToUnload(),g.trackScroll&&g.trackScroll.enable&&this.trackScroll(g.trackScroll.granularity,g.trackScroll.threshold),g.trackInfinityScroll&&g.trackInfinityScroll.enable&&this.trackInfinityScroll(g.trackInfinityScroll.step,g.trackInfinityScroll.threshold),g.trackRead&&g.trackRead.enable&&this.trackRead(g.trackRead.target,g.trackRead.granularity,g.trackRead.milestones),g.trackViewability&&g.trackViewability.enable&&this.trackViewability(g.trackViewability.targets),g.trackMedia&&g.trackMedia.enable&&this.trackMedia(g.trackMedia.selector,g.trackMedia.heartbeat),g.trackForm&&g.trackForm.enable&&this.trackForm(g.trackForm.target),g.trackPerformance&&g.trackPerformance.enable&&window.parent.addEventListener("DOMContentLoaded",function(){c=m.getP(),h.navigation_timing=c.performanceResult||{},h.navigation_type=c.navigationType||{}},!1)}},{key:"initPage",value:function(e){void 0!==e.context&&void 0!==e.user&&(y={url:void 0!==e.context.url?e.context.url:l.url,referrer:void 0!==e.context.referrer?e.context.referrer:l.referrer,content_id:e.context.content_id||"",user_id:e.user.user_id||""}),void 0!==e.user&&(w={user_status:e.user.user_status||void 0,site_session:e.user.site_session||void 0,external_ids:{},custom_object:e.user.custom_object||{},federation_id:e.user.federation_id||void 0}),void 0!==e.context&&(h={root_id:m.generateRootId(),product_family:void 0!==e.context.product_family?e.context.product_family:l.product_family,product:e.context.product||l.product,app:e.context.app||void 0,app_version:e.context.app_version||void 0,page_title:e.context.page_title||l.page_title,source:e.context.source||void 0,edition:e.context.edition||void 0,content_name:e.context.content_name||void 0,content_status:e.context.content_status||void 0,page_name:e.context.page_name||void 0,page_num:e.context.page_num||1,category_l1:e.context.category_l1||void 0,category_l2:e.context.category_l2||void 0,category_l3:e.context.category_l3||void 0,tracking_code:e.context.tracking_code||void 0,campaign:e.context.campaign||void 0,search:e.context.search||void 0,events:e.context.events||void 0,custom_object:e.context.custom_object||{},funnel:e.context.funnel||{},visibility:window.parent.document.visibilityState||"unknown"}),g.trackPerformance&&g.trackPerformance.enable&&(c=m.getP(),h.navigation_timing=c.performanceResult||{},h.navigation_type=c.navigationType||{}),f&&f.outputLog&&console.log("ATJ initialized Page"),this.initEventListeners()}},{key:"trackPage",value:function(){m.transmit("view","page",y,w,h,u,g.useGet,f)}},{key:"trackAction",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"action",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"unknown",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},o=Date.now();h.events=n||null,m.transmit(e,t,y,w,h,{action:{location:a.location||void 0,destination:a.destination||void 0,dataset:a.dataset||void 0,name:a.action_name||void 0,elapsed_since_page_load:(o-k)/1e3,elapsed_since_prev_action:(o-s)/1e3,content_id:a.content_id||void 0,content_name:a.content_name||void 0,custom_vars:a.custom_vars||{}}},g.useGet,f),h.events=null,s=o}},{key:"delegateClickEvents",value:function(r){v.remove(_.click),_.click=v.add(window.parent.document.body,"click",function(e){var t=r.trackClick&&r.trackClick.targetAttribute?r.trackClick.targetAttribute:"data-trackable",n=m.qsM("a",e.target),a=m.qsM('a, button, input, [role="button"]',e.target,t),o=null,i=null;n&&(i=((o=n.element).pathname||"").match(/.+\/.+?\.([a-z]+([?#;].*)?$)/),r.trackLink&&r.trackLink.enable&&o.hostname&&window.parent.location.hostname!==o.hostname&&r.trackLink.internalDomains.indexOf(o.hostname)<0&&m.transmit("open","outbound_link",y,w,h,{link:{destination:o.href||void 0,dataset:o.dataset||void 0,target:o.target||void 0,media:o.media||void 0,type:o.type||void 0,name:r.trackLink.nameAttribute?o.getAttribute(r.trackLink.nameAttribute):void 0}},g.useGet,f),r.trackDownload&&r.trackDownload.enable&&o.hostname&&i&&0<=r.trackDownload.fileExtensions.indexOf(i[1])&&m.transmit("download","file",y,w,h,{download:{destination:o.href||void 0,dataset:o.dataset||void 0,target:o.target||void 0,media:o.media||void 0,type:o.type||void 0,name:r.trackLink.nameAttribute?o.getAttribute(r.trackDownload.nameAttribute):void 0}},g.useGet,f),r.passAtlasId&&r.passAtlasId.pass&&o.hostname&&window.parent.location.hostname!==o.hostname&&0<=r.passAtlasId.passTargetDomains.indexOf(o.hostname)&&(o.href=m.buildLink(o.href,r.passAtlasId.passParamKey))),a&&(o=a.element,m.transmit("click",a.category,y,w,h,{action:{name:o.getAttribute(t),location:a.path,destination:o.href||void 0,id:o.id||void 0,target:o.target||void 0,dataset:o.dataset||void 0}},g.useGet,f))},!1)}},{key:"setEventToUnload",value:function(){v.remove(_.unload),_.unload=v.add(window.parent,p,function(){m.transmit("unload","page",y,w,h,{action:{name:"leave_from_page",elapsed_since_page_load:(Date.now()-k)/1e3}},g.useGet,f)},!1)}},{key:"trackScroll",value:function(e,t){var n=e||25,a=100/n,o=1e3*t||2e3,i=Date.now(),r=i,d={},l=0,u=0;v.remove(_.scroll),_.scroll=v.add(window.parent,"atlasVisibilityStatus",function(){"hidden"!==(d=m.getV(null)).detail.documentIsVisible&&"prerender"!==d.detail.documentIsVisible&&(i=Date.now(),l=Math.round(d.detail.documentScrollRate*a)*n,u<l&&0<=l&&l<=100&&setTimeout(function(){u<l&&(m.transmit("scroll","page",y,w,h,{scroll_depth:{page_height:d.detail.documentHeight,viewed_until:d.detail.documentScrollUntil,viewed_percent:l,elapsed_since_page_load:(i-k)/1e3,elapsed_since_prev_action:(i-r)/1e3}},g.useGet,f),u=l),r=i},o))},!1)}},{key:"trackInfinityScroll",value:function(e,t){var n=1e3*t||2e3,a=Date.now(),o=a,i={},r=0,d=0;v.remove(_.infinityScroll),_.infinityScroll=v.add(window.parent,"atlasVisibilityStatus",function(){"hidden"!==(i=m.getV(null)).detail.documentIsVisible&&"prerender"!==i.detail.documentIsVisible&&(a=Date.now(),r=i.detail.documentScrollUntil,d<r&&d<=r&&e<=r&&setTimeout(function(){d<r&&(m.transmit("infinity_scroll","page",y,w,h,{scroll_depth:{page_height:i.detail.documentHeight,viewed_until:r,viewed_percent:i.detail.documentScrollRate,elapsed_since_page_load:(a-k)/1e3,elapsed_since_prev_action:(a-o)/1e3}},g.useGet,f),d=r+e),o=a},n))},!1)}},{key:"trackRead",value:function(e,t,n){if(e){var a=t||25,o=100/a,i=Date.now(),r=i,d={},l=0,u=null,c=null,s=0,p=0;v.remove(_.read),_.read=v.add(window.parent,"atlasVisibilityStatus",function(){"hidden"!==(d=m.getV(e)).detail.documentIsVisible&&"prerender"!==d.detail.documentIsVisible&&d.status.isInView&&(1e3<=(i=Date.now())-r&&(r=i),l+=i-r,r=i,n.forEach(function(e){l/1e3|e<=0&&i-r<1e3&&(n.shift(),u=e)}),u&&c!==u&&(m.transmit("read","article",y,w,h,{read:{mode:"time",milestone:u,page_height:d.detail.documentHeight,element_height:d.detail.targetHeight,viewed_from:d.detail.targetVisibleTop,viewed_until:d.detail.targetVisibleBottom,viewed_percent:s,elapsed_since_page_load:(i-k)/1e3,elapsed_since_prev_action:(i-r)/1e3}},g.useGet,f),c=u,u=null),s=Math.round(d.detail.targetScrollRate*o)*a,p<s&&0<=s&&s<=100&&setTimeout(function(){p<s&&(m.transmit("read","article",y,w,h,{read:{mode:"scroll",page_height:d.detail.documentHeight,element_height:d.detail.targetHeight,viewed_from:d.detail.targetVisibleTop,viewed_until:d.detail.targetVisibleBottom,viewed_percent:s,elapsed_since_page_load:(i-k)/1e3,elapsed_since_prev_action:(i-r)/1e3}},g.useGet,f),p=s)},1e3))},!1)}}},{key:"trackViewability",value:function(n){var a=Date.now(),o={},i={};v.remove(_.viewability),_.viewability=v.add(window.parent,"atlasVisibilityStatus",function(){for(var e=function(e){n[e]&&(o[e]=m.getV(n[e]),!0===o[e].status.isInView&&"hidden"!==o[e].detail.documentIsVisible&&"prerender"!==o[e].detail.documentIsVisible&&.5<=o[e].detail.targetViewableRate&&!i[e]&&setTimeout(function(){.5<=o[e].detail.targetViewableRate&&!i[e]&&(a=Date.now(),i[e]=!0,m.transmit("viewable_impression","ad",y,w,h,{viewability:{page_height:o[e].detail.documentHeight,element_order_in_target:e,element_tag:n[e].tagName,element_class:n[e].className,element_id:n[e].id,element_height:o[e].detail.targetHeight,elapsed_since_page_load:(a-k)/1e3}},g.useGet,f))},1e3))},t=0;t<n.length;t++)e(t)},!1)}},{key:"trackMedia",value:function(a,o){for(var i=["play","pause","end"],r={},e=function(n){v.remove(_.media[i[n]]),_.media[i[n]]=v.add(window.parent.document.body,i[n],function(e){if(m.qsM(a,e.target)){var t=m.getM(e.target);m.transmit(i[n],t.tag,y,w,h,{media:t},g.useGet,f)}},{capture:!0})},t=0;t<i.length;t++)e(t);v.remove(_.media.timeupdate),_.media.timeupdate=v.add(window.parent.document,"timeupdate",function(e){if(m.qsM(a,e.target)){var t=m.getM(e.target),n=t.tag+"-"+t.id+"-"+t.src;if(r[n])return!1;r[n]=setTimeout(function(){!0!==e.target.paused&&!0!==e.target.ended&&m.transmit("playing",t.tag,y,w,h,{media:t},g.useGet,f),r[n]=!1},1e3*o)}},{capture:!0})}},{key:"trackForm",value:function(e){if(e){for(var n=["focus","change"],a={name:e.name||e.id||"-",dataset:e.dataset,items_detail:{}},t=function(t){v.remove(_.form[n[t]]),_.form[n[t]]=v.add(e,n[t],function(e){a=m.getF(a,n[t],e.target,k)},!1)},o=0;o<n.length;o++)t(o);v.remove(_.unload),_.unload=v.add(window.parent,p,function(){m.transmit("track","form",y,w,h,{form:a},g.useGet,f)},!1)}}}]),a}();n.default=b},{"./utils.js":7}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),o=r(e("cookie")),i=r(e("uuid/v4"));function r(e){return e&&e.__esModule?e:{default:e}}var y=null,_=null,d=null,k=null,b="0",l={},u=0,S=!0,c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,[{key:"initSystem",value:function(e){var t=o.default.parse(window.parent.document.cookie);y=e.endpoint?e.endpoint:"atlas-endpoint.data.n8s.jp",_=e.apiKey?e.apiKey:"885cfd611594f1cb21ecd50b741a9f55a68fc4d8",d=e.beaconTimeout?e.beaconTimeout:2e3,k=e.cookieName?e.cookieName:"atlasId",(!(b=t[k])||"0"===b||0===b||"1"===b||1===b||b.length<5)&&(b=((0,i.default)()+(0,i.default)()).replace(/-/g,""))}},{key:"qsM",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,a=null,o="button",i=[];for(3===t.nodeType&&(t=t.parentNode);t&&t!==window.parent.document;){var r=(t.matches||t.msMatchesSelector||function(){return!1}).bind(t);if(n)t.hasAttribute(n)&&i.unshift(t.getAttribute(n)),!a&&r(e)&&("a"===t.tagName.toLowerCase()&&(o="link"),a=t);else if(r(e))return{element:t};t=t.parentNode}return!!(a&&0<i.length)&&{element:a,category:o,path:i.join(">")}}},{key:"getC",value:function(e){var t=o.default.parse(window.parent.document.cookie);return t[e]?t[e]:""}},{key:"getQ",value:function(e){var t=window.parent.location.search.slice(1);if(""===t)return"";for(var n=t.split("&"),a=n.length,o=0;o<a;++o){var i=n[o].split("=");if(decodeURIComponent(i[0])===e)return decodeURIComponent(i[1])}return""}},{key:"getLS",value:function(e){var t="";try{t=window.parent.localStorage[e]}catch(e){t=""}return t}},{key:"setLS",value:function(e,t){try{window.parent.localStorage.setItem(e,t)}catch(e){}}},{key:"delLS",value:function(e){try{window.parent.localStorage.removeItem(e)}catch(e){}}},{key:"getP",value:function(){var e={},t={},n={};return"performance"in window.parent&&(n={unload:(e=window.parent.performance.timing).unloadEventEnd-e.unloadEventStart,redirect:e.redirectEnd-e.redirectStart,dns:e.domainLookupEnd-e.domainLookupStart,tcp:e.connectEnd-e.connectStart,request:e.responseStart-e.requestStart,response:e.responseEnd-e.responseStart,dom:e.domContentLoadedEventStart-e.domLoading<0||36e5<e.domContentLoadedEventStart-e.domLoading?null:e.domContentLoadedEventStart-e.domLoading,domContent:e.domContentLoadedEventEnd-e.domContentLoadedEventStart<0||36e5<e.domContentLoadedEventEnd-e.domContentLoadedEventStart?null:e.domContentLoadedEventEnd-e.domContentLoadedEventStart,onload:e.loadEventEnd-e.loadEventStart<0||36e5<e.loadEventEnd-e.loadEventStart?null:e.loadEventEnd-e.loadEventStart,untilResponseComplete:e.responseEnd-e.navigationStart<0||36e5<e.responseEnd-e.navigationStart?null:e.responseEnd-e.navigationStart,untilDomComplete:e.domContentLoadedEventStart-e.navigationStart<0||36e5<e.domContentLoadedEventStart-e.navigationStart?null:e.domContentLoadedEventStart-e.navigationStart},t=(window.parent.performance||{}).navigation),{performanceResult:n,navigationType:t}}},{key:"handler",value:function(){return{add:function(e,t,n,a){return e.addEventListener(t,n,a),l[u]={target:e,type:t,listener:n,capture:a},u++},remove:function(e){if(e in l){var t=l[e];t.target.removeEventListener(t.type,t.listener,t.capture)}}}}},{key:"getV",value:function(e){var t={};try{t=e.getBoundingClientRect()}catch(e){t={}}var n,a=window.parent.innerHeight,o=window.parent.document.documentElement.scrollHeight,i=window.parent.document.visibilityState||"unknown",r="pageYOffset"in window.parent?window.parent.pageYOffset:(window.parent.document.documentElement||window.parent.document.body.parentNode||window.parent.document.body).scrollTop,d=r+a,l=t.height,u=t.top<=0?0:t.top,c=-1*(t.bottom-a)<=0?0:-1*(t.bottom-a),s=d,p=d/o,m=null,v=null,f=!1,g=null;return 0<=t.top&&t.bottom>a&&t.top>=a?(v=m=null,f=!1,g="pre"):0<=t.top&&t.bottom>a&&t.top<a?(m=0,v=a-t.top,f=!0,g="top"):t.top<0&&t.bottom>a?(v=(m=-1*t.top)+a,f=!0,g="middle"):0<=t.top&&t.bottom<=a?(v=l,f=!(m=0),g="all"):t.top<0&&0<=t.bottom&&t.bottom<=a?(m=l+t.top,v=l,f=!0,g="bottom"):t.top<0&&t.bottom<0?(v=m=null,f=!1,g="post"):(f=!1,g="unknown"),{detail:{viewportHeight:a,documentHeight:o,documentIsVisible:i,documentVisibleTop:r,documentVisibleBottom:d,targetHeight:l,targetVisibleTop:m,targetVisibleBottom:n=v,targetMarginTop:u,targetMarginBottom:c,targetScrollUntil:n,targetScrollRate:n/l,targetViewableRate:(v-m)/l,documentScrollUntil:s,documentScrollRate:p},status:{isInView:f,location:g}}}},{key:"getM",value:function(e){if(void 0!==e)return{tag:e.nodeName.toLowerCase()||"na",id:e.id||"na",src:e.src||"na",type:e.type||void 0,codecs:e.codecs||void 0,muted:e.muted||!1,default_muted:e.defaultMuted||!1,autoplay:e.autoplay||!1,width:e.clientWidth||void 0,height:e.clientHeight||void 0,player_id:e.playerId||void 0,played_percent:Math.round(e.currentTime/e.duration*100),duration:e.duration,current_time:Math.round(10*e.currentTime)/10,dataset:e.dataset}}},{key:"getF",value:function(e,t,n,a){var o=n.name||n.id||"-",i=0;if("select"===n.tagName.toLowerCase()){for(var r=[],d=0;d<n.length;d++)n[d].selected&&r.push(!0);i=r.length}else i="input"!==n.tagName.toLowerCase()||"checkbox"!==n.type&&"radio"!==n.type?n.value.length:n.checked?1:0;return"hidden"!==n.type&&(e.items_detail[o]={status:t,length:i}),e.first_item||(e.first_item=n.name||n.id||"-",e.first_item_since_page_load=(Date.now()-a)/1e3),e.last_item=n.name||n.id||"-",e.last_item_since_page_load=(Date.now()-a)/1e3,e.last_item_since_first_item=e.last_item_since_page_load-e.first_item_since_page_load,e}},{key:"generateRootId",value:function(){return b+(0,i.default)().replace(/-/g,"")}},{key:"buildIngest",value:function(e,t,n){var a={user:e,context:{}},o="unknown";for(var i in window.parent.orientation&&(o=90===Math.abs(window.parent.orientation)?"landscape":"portrait"),t)a.context[i]=t[i];for(var r in n)a.context[r]=n[r];var d=new Date;return a.user.timezone=d.getTimezoneOffset()/60*-1,a.user.timestamp=d.toISOString(),a.user.viewport_height=window.parent.innerHeight,a.user.viewport_width=window.parent.innerWidth,a.user.screen_height=window.parent.screen.height,a.user.screen_width=window.parent.screen.width,a.user.layout=o,a}},{key:"buildLink",value:function(e,t){var n=null,a=null;return b&&(n=new RegExp("(\\?|&)"+t+"=(.*?)(&|$)"),0<(a=e.search.replace(n,"")).length?e.search=a+"&"+t+"="+b:e.search="?"+t+"="+b),e.href}},{key:"compress",value:function(e){var t=e;return t=(t=(t=(t=(t=(t=(t=t.replace(/%22%7D%2C%22/g,"%z")).replace(/%22%3A%22/g,"%y")).replace(/%22%2C%22/g,"%x")).replace(/%22%3A%7B/g,"%w")).replace(/%22%3A/g,"%v")).replace(/%2C%22/g,"%u")).replace(/%7D%7D%7D/g,"%t")}},{key:"xhr",value:function(e,t,n,a){var o=null;window.parent.XDomainRequest?((o=new XDomainRequest).ontimeout=function(){},o.onprogress=function(){},o.onerror=function(){}):o=new XMLHttpRequest,o.open(n,e,a),!0===a&&(o.timeout=d),o.withCredentials=!0,"GET"===n?o.send():o.send(t)}},{key:"transmit",value:function(e,t,n,a,o,i,r,d){var l=document.location&&"http:"===document.location.protocol?"http:":"https:",u=Date.now(),c=d&&d.syncMode?"&sync=true":"",s=r?"GET":"POST",p=!("unload"===e&&"page"===t),m="true"===this.getLS("atlasOptout"),v=1;this.getC(k)!==b&&(b=v=0);var f=l+"//"+y+"/ATJ-2.13.0/"+u+"/"+encodeURIComponent(b)+"/"+v+"/ingest?k="+_+c+"&a="+e+"&c="+t+"&g="+encodeURIComponent(n.url)+"&r="+encodeURIComponent(n.referrer)+"&i="+encodeURIComponent(n.content_id)+"&u="+encodeURIComponent(n.user_id)+"&aqe=%",g=JSON.stringify(this.buildIngest(a,o,i)),w=null;if(d&&d.outputLog){var h=JSON.parse(g);h.action=e,h.category=t,h.context.url=n.url,h.context.referrer=n.referrer,h.context.content_id=n.content_id,h.user.user_id=n.user_id,console.dir(h)}if(r&&(w=this.compress(encodeURIComponent(g)),g=null,f=f+"&d="+w),!m){if("sendBeacon"in navigator&&!0===S){try{S=navigator.sendBeacon(f,g)}catch(e){S=!1}return S||this.xhr(f,g,s,p),!0}return this.xhr(f,g,s,p),!0}}}]),e}();n.default=c},{cookie:1,"uuid/v4":4}]},{},[5]);