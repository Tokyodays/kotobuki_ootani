!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.rnikkeiTracking=e():t.rnikkeiTracking=e()}(this,function(){return function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=8)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t,e,n,o){var r=Array.isArray(n)?n:[n];return{name:"rnikkei-tracking",action:t||"click",category:e,events:r.join(","),updateContext:o.updateContext,options:{location:o.location||window.location.href,destination:o.destination||"",name:o.name||"",action_name:o.actionName||"",content_id:o.contentId||"",content_name:o.contentName||"",custom_vars:o.customVars||{}}}};e.default=o},function(t,e,n){"use strict";(function(t){var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};(function(t){"Document"in this||"undefined"==typeof WorkerGlobalScope&&"function"!=typeof importScripts&&(this.HTMLDocument?this.Document=this.HTMLDocument:(this.Document=this.HTMLDocument=document.constructor=new Function("return function Document() {}")(),this.Document.prototype=document)),"Element"in this&&"HTMLElement"in this||function(){function t(){return s--||clearTimeout(e),!(!document.body||document.body.prototype||!/(complete|interactive)/.test(document.readyState)||(u(document,!0),e&&document.body.prototype&&clearTimeout(e),!document.body.prototype))}if(window.Element&&!window.HTMLElement)return void(window.HTMLElement=window.Element);window.Element=window.HTMLElement=new Function("return function Element() {}")();var e,n=document.appendChild(document.createElement("body")),o=n.appendChild(document.createElement("iframe")),r=o.contentWindow.document,i=Element.prototype=r.appendChild(r.createElement("*")),c={},u=function t(e,n){var o,r,i,u=e.childNodes||[],a=-1;if(1===e.nodeType&&e.constructor!==Element){e.constructor=Element;for(o in c)r=c[o],e[o]=r}for(;i=n&&u[++a];)t(i,n);return e},a=document.getElementsByTagName("*"),l=document.createElement,s=100;i.attachEvent("onpropertychange",function(t){for(var e,n=t.propertyName,o=!c.hasOwnProperty(n),r=i[n],u=c[n],l=-1;e=a[++l];)1===e.nodeType&&(o||e[n]===u)&&(e[n]=r);c[n]=r}),i.constructor=Element,i.hasAttribute||(i.hasAttribute=function(t){return null!==this.getAttribute(t)}),t()||(document.onreadystatechange=t,e=setInterval(t,25)),document.createElement=function(t){var e=l(String(t).toLowerCase());return u(e)},document.removeChild(n)}(),"document"in this&&"querySelector"in this.document||function(){function t(t,o,r){var i,c,u=document.createElement("div"),a="qsa"+String(Math.random()).slice(3);return u.innerHTML="x<style>"+o+"{qsa:"+a+";}",i=n.appendChild(u.lastChild),c=e(t,o,r,a),n.removeChild(i),r?c[0]:c}function e(t,n,o,r){var i,c=/1|9/.test(t.nodeType),u=t.childNodes,a=[],l=-1;if(c&&t.currentStyle&&t.currentStyle.qsa===r&&a.push(t)&&o)return a;for(;i=u[++l];)if(a=a.concat(e(i,n,o,r)),o&&a.length)return a;return a}var n=document.getElementsByTagName("head")[0];Document.prototype.querySelector=Element.prototype.querySelector=function(e){return t(this,e,!0)},Document.prototype.querySelectorAll=Element.prototype.querySelectorAll=function(e){return t(this,e,!1)}}(),"document"in this&&"matches"in document.documentElement||(Element.prototype.matches=Element.prototype.webkitMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.mozMatchesSelector||function(t){for(var e=this,n=(e.document||e.ownerDocument).querySelectorAll(t),o=0;n[o]&&n[o]!==e;)++o;return!!n[o]}),"document"in this&&"closest"in document.documentElement||(Element.prototype.closest=function(t){for(var e=this;e;){if(e.matches(t))return e;e="SVGElement"in window&&e instanceof SVGElement?e.parentNode:e.parentElement}return null})}).call("object"===("undefined"==typeof window?"undefined":e(window))&&window||"object"===("undefined"==typeof self?"undefined":e(self))&&self||"object"===(void 0===t?"undefined":e(t))&&t||{})}).call(e,n(4))},,function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=function(t){return Array.prototype.slice.call(t)};e.default=function(t){return function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e),this._el=t,this._options=this._parseOptions(n),this._timer=null,this._observer=null,this._start()}return r(e,[{key:"_parseOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._el.getAttribute("data-rn-inview-track-root")||t.root;return{threshold:this._el.getAttribute("data-rn-inview-track-threshold")||t.threshold||.5,delay:this._el.getAttribute("data-rn-inview-track-delay")||t.delay||1e3,name:this._el.getAttribute("data-rn-inview-track")||t.name||"rnTrack:inview",value:this._el.getAttribute("data-rn-inview-track-value")||t.value||null,valueSelector:this._el.getAttribute("data-rn-inview-track-value-selector")||t.valueSelector||null,root:e?document.documentElement.querySelector(e):null}}},{key:"_start",value:function(){var t=this;this._observer=setInterval(function(){t._isInview()?t._onEnter():t._onLeave()},500)}},{key:"_stop",value:function(){clearInterval(this._observer)}},{key:"_track",value:function(){var e={customVars:this._getValue()};t.track("inview","element",this._options.name,e,this._el)}},{key:"_onEnter",value:function(){var t=this;this._timer||(this._timer=setTimeout(function(){t._stop(),t._track()},this._options.delay))}},{key:"_onLeave",value:function(){this._timer&&(clearTimeout(this._timer),this._timer=null)}},{key:"_getRootRect",value:function(){if(this._options.root)return this._options.root.getBoundingClientRect();var t=document.documentElement,e=document.body;return{top:0,left:0,right:t.clientWidth||e.clientWidth,width:t.clientWidth||e.clientWidth,bottom:t.clientHeight||e.clientHeight,height:t.clientHeight||e.clientHeight}}},{key:"_getValue",value:function(){var t=this,e=JSON.parse(this._options.value)||{};if(!this._options.valueSelector)return e;var n=JSON.parse(this._options.valueSelector);return Object.keys(n).reduce(function(e,o){var r=n[o],c=i(t._el.querySelectorAll("["+r+"]")),u=c.map(function(t){return t.getAttribute(r)}),a=u.join(",");return e[o]=a,e},e)}},{key:"_isInview",value:function(){var t=this._el;if("none"===window.getComputedStyle(t).display)return!1;var e=t.getBoundingClientRect();if(0===e.top&&0===e.bottom)return!1;var n=this._getRootRect(),o=Math.max(e.top,n.top),r=Math.min(e.bottom,n.bottom),i=r-o;if(i<=0)return!1;var c=e.bottom-e.top,u=n.bottom-n.top,a=i/u,l=i/c,s=this._options.threshold;return a>=s||l>=s}}],[{key:"_watch",value:function(){if(!document.body.getAttribute("data-rn-inview-track-initialized")){document.body.setAttribute("data-rn-inview-track-initialized",!0);var t=function(t){t.forEach(function(t){i(t.addedNodes).filter(function(t){return t.nodeType===Node.ELEMENT_NODE}).forEach(function(t){var n="[data-rn-inview-track]",o=i(t.querySelectorAll(n));(t.msMatchesSelector?t.msMatchesSelector(n):t.matches(n))&&o.push(t),o.forEach(function(t){t.inviewTracker=new e(t)})})})};new MutationObserver(t).observe(document.body,{childList:!0,subtree:!0})}}},{key:"_initAll",value:function(){i(document.querySelectorAll("[data-rn-inview-track]")).forEach(function(t){t.inviewTracker=t.inviewTracker||new e(t)})}},{key:"init",value:function(){e._initAll(),e._watch()}}]),e}()}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},,,,function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}var r=n(3),i=o(r),c=n(0),u=o(c),a=n(1);o(a);window.initInviewTracker=function(t){var e=function(e,n,o,r){var i=(0,u.default)(e,n,o,r);t(i)};(0,i.default)({track:e}).init()}}])});